<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>تعديل الملف الشخصي - تقييم الأصول</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Cairo", sans-serif;
      }
      .gradient-bg {
        background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
      }
      .card-hover {
        transition: all 0.3s ease;
      }
      .card-hover:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      }

      .form-group {
        position: relative;
        margin-bottom: 1.5rem;
      }

      .form-input {
        width: 100%;
        padding: 12px 16px;
        border: 2px solid #e5e7eb;
        border-radius: 12px;
        font-size: 16px;
        transition: all 0.3s ease;
        background: white;
      }

      .form-input:focus {
        outline: none;
        border-color: #3b82f6;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
      }

      .form-input.error {
        border-color: #ef4444;
        background-color: #fef2f2;
      }

      .form-input.success {
        border-color: #10b981;
        background-color: #f0fdf4;
      }

      .form-label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: #374151;
        font-size: 14px;
      }

      .form-error {
        color: #ef4444;
        font-size: 12px;
        margin-top: 4px;
        display: none;
      }

      .form-success {
        color: #10b981;
        font-size: 12px;
        margin-top: 4px;
        display: none;
      }

      .floating-label {
        position: absolute;
        top: 12px;
        right: 16px;
        color: #9ca3af;
        transition: all 0.3s ease;
        pointer-events: none;
        background: white;
        padding: 0 4px;
      }

      .form-input:focus + .floating-label,
      .form-input:not(:placeholder-shown) + .floating-label {
        top: -8px;
        right: 12px;
        font-size: 12px;
        color: #3b82f6;
        font-weight: 600;
      }

      .avatar-upload {
        position: relative;
        width: 120px;
        height: 120px;
        margin: 0 auto;
        border-radius: 50%;
        overflow: hidden;
        border: 4px solid white;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .avatar-upload:hover {
        transform: scale(1.05);
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
      }

      .avatar-overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .avatar-upload:hover .avatar-overlay {
        opacity: 1;
      }

      .section-divider {
        border: none;
        height: 1px;
        background: linear-gradient(to left, transparent, #e5e7eb, transparent);
        margin: 2rem 0;
      }

      .toggle-switch {
        position: relative;
        display: inline-block;
        width: 50px;
        height: 24px;
      }

      .toggle-switch input {
        opacity: 0;
        width: 0;
        height: 0;
      }

      .toggle-slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #ccc;
        transition: 0.4s;
        border-radius: 24px;
      }

      .toggle-slider:before {
        position: absolute;
        content: "";
        height: 18px;
        width: 18px;
        left: 3px;
        bottom: 3px;
        background-color: white;
        transition: 0.4s;
        border-radius: 50%;
      }

      input:checked + .toggle-slider {
        background-color: #3b82f6;
      }

      input:checked + .toggle-slider:before {
        transform: translateX(26px);
      }

      .skill-tag {
        display: inline-block;
        background: #f3f4f6;
        color: #374151;
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 12px;
        margin: 4px;
        cursor: pointer;
        transition: all 0.2s ease;
        border: 2px solid transparent;
      }

      .skill-tag:hover {
        background: #e5e7eb;
      }

      .skill-tag.selected {
        background: #3b82f6;
        color: white;
        border-color: #1d4ed8;
      }

      .progress-bar {
        width: 100%;
        height: 8px;
        background: #f3f4f6;
        border-radius: 4px;
        overflow: hidden;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #3b82f6, #1d4ed8);
        border-radius: 4px;
        transition: width 0.3s ease;
      }

      .social-input {
        position: relative;
      }

      .social-icon {
        position: absolute;
        left: 12px;
        top: 50%;
        transform: translateY(-50%);
        width: 20px;
        height: 20px;
        z-index: 10;
      }

      .social-input .form-input {
        padding-left: 44px;
      }

      .loading-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1000;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
      }

      .loading-overlay.active {
        opacity: 1;
        visibility: visible;
      }

      .loading-spinner {
        width: 50px;
        height: 50px;
        border: 5px solid #f3f4f6;
        border-top: 5px solid #3b82f6;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .floating-save {
        position: fixed;
        bottom: 24px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 50;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
      }

      .floating-save.visible {
        opacity: 1;
        visibility: visible;
      }

      .notification {
        position: fixed;
        top: 24px;
        right: 24px;
        background: white;
        border-radius: 12px;
        padding: 16px 20px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        border-left: 4px solid #10b981;
        z-index: 1000;
        transform: translateX(400px);
        transition: transform 0.3s ease;
      }

      .notification.show {
        transform: translateX(0);
      }

      .tab-button {
        padding: 12px 24px;
        border: none;
        background: transparent;
        color: #6b7280;
        font-weight: 500;
        border-bottom: 2px solid transparent;
        transition: all 0.3s ease;
        cursor: pointer;
      }

      .tab-button.active {
        color: #3b82f6;
        border-bottom-color: #3b82f6;
      }

      .tab-content {
        display: none;
        animation: fadeIn 0.3s ease;
      }

      .tab-content.active {
        display: block;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .character-count {
        position: absolute;
        bottom: 8px;
        left: 12px;
        font-size: 11px;
        color: #9ca3af;
      }

      .character-count.warning {
        color: #f59e0b;
      }

      .character-count.error {
        color: #ef4444;
      }
    </style>
  </head>
  <body class="bg-gray-50">
    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
      <div class="bg-white rounded-2xl p-8 text-center">
        <div class="loading-spinner mx-auto mb-4"></div>
        <p class="text-gray-600">جاري حفظ التغييرات...</p>
      </div>
    </div>

    <!-- Header -->
    <header class="gradient-bg text-white p-6 shadow-xl">
      <div class="flex items-center justify-between">
        <button
          onclick="goBack()"
          class="w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center backdrop-blur-sm"
        >
          <svg
            class="w-6 h-6"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M15 19l-7-7 7-7"
            />
          </svg>
        </button>
        <div class="text-center">
          <h1 class="text-2xl font-bold">تعديل الملف الشخصي</h1>
          <p class="text-sm opacity-90">قم بتحديث معلوماتك الشخصية</p>
        </div>
        <button
          onclick="resetForm()"
          class="w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center backdrop-blur-sm"
        >
          <svg
            class="w-6 h-6"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"
            />
          </svg>
        </button>
      </div>

      <!-- Progress Bar -->
      <div class="mt-6">
        <div class="flex justify-between text-xs mb-2">
          <span>اكتمال الملف الشخصي</span>
          <span id="completionPercentage">75%</span>
        </div>
        <div class="progress-bar">
          <div id="progressFill" class="progress-fill" style="width: 75%"></div>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="p-6 pb-32">
      <!-- Profile Picture Section -->
      <div class="bg-white rounded-2xl p-6 shadow-lg mb-6 text-center">
        <div class="avatar-upload" onclick="changeProfilePicture()">
          <img
            id="profileImage"
            src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%236b7280'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z'/%3E%3C/svg%3E"
            alt="الصورة الشخصية"
            class="w-full h-full object-cover bg-gray-100"
          />
          <div class="avatar-overlay">
            <svg
              class="w-8 h-8 text-white"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"
              />
            </svg>
          </div>
        </div>
        <p class="text-sm text-gray-600 mt-4">انقر لتغيير الصورة الشخصية</p>
      </div>

      <!-- Tabs Navigation -->
      <div class="bg-white rounded-2xl shadow-lg mb-6 overflow-hidden">
        <div class="flex border-b border-gray-200">
          <button class="tab-button active" onclick="switchTab('personal')">
            المعلومات الشخصية
          </button>
          <button class="tab-button" onclick="switchTab('contact')">
            معلومات الاتصال
          </button>
          <button class="tab-button" onclick="switchTab('professional')">
            المعلومات المهنية
          </button>
          <button class="tab-button" onclick="switchTab('privacy')">
            الخصوصية
          </button>
        </div>

        <!-- Personal Information Tab -->
        <div id="personalTab" class="tab-content active p-6">
          <h3 class="text-lg font-bold text-gray-800 mb-6 flex items-center">
            <svg
              class="w-5 h-5 ml-2 text-blue-600"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
              />
            </svg>
            المعلومات الأساسية
          </h3>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="form-group">
              <label class="form-label">الاسم الأول *</label>
              <input
                type="text"
                id="firstName"
                class="form-input"
                placeholder=" "
                value="أحمد"
                required
              />
              <div class="floating-label">الاسم الأول</div>
              <div class="form-error">يرجى إدخال الاسم الأول</div>
              <div class="form-success">✓ صحيح</div>
            </div>

            <div class="form-group">
              <label class="form-label">الاسم الأخير *</label>
              <input
                type="text"
                id="lastName"
                class="form-input"
                placeholder=" "
                value="محمد"
                required
              />
              <div class="floating-label">الاسم الأخير</div>
              <div class="form-error">يرجى إدخال الاسم الأخير</div>
              <div class="form-success">✓ صحيح</div>
            </div>

            <div class="form-group">
              <label class="form-label">اسم المستخدم *</label>
              <input
                type="text"
                id="username"
                class="form-input"
                placeholder=" "
                value="ahmed_mohamed"
                required
              />
              <div class="floating-label">اسم المستخدم</div>
              <div class="form-error">اسم المستخدم غير متاح</div>
              <div class="form-success">✓ متاح</div>
            </div>

            <div class="form-group">
              <label class="form-label">تاريخ الميلاد</label>
              <input
                type="date"
                id="birthDate"
                class="form-input"
                value="1990-01-15"
              />
              <div class="form-error">تاريخ غير صحيح</div>
            </div>

            <div class="form-group">
              <label class="form-label">الجنس</label>
              <select id="gender" class="form-input">
                <option value="">اختر الجنس</option>
                <option value="male" selected>ذكر</option>
                <option value="female">أنثى</option>
                <option value="other">آخر</option>
              </select>
            </div>

            <div class="form-group">
              <label class="form-label">الجنسية</label>
              <select id="nationality" class="form-input">
                <option value="">اختر الجنسية</option>
                <option value="SA" selected>السعودية</option>
                <option value="AE">الإمارات</option>
                <option value="EG">مصر</option>
                <option value="JO">الأردن</option>
                <option value="other">أخرى</option>
              </select>
            </div>
          </div>

          <hr class="section-divider" />

          <div class="form-group">
            <label class="form-label">نبذة شخصية</label>
            <div class="relative">
              <textarea
                id="bio"
                class="form-input"
                rows="4"
                maxlength="500"
                placeholder="اكتب نبذة مختصرة عن نفسك..."
              >
مطور تطبيقات محترف مع خبرة 5 سنوات في تطوير الحلول التقنية المبتكرة. أحب العمل في فريق وتعلم التقنيات الجديدة.</textarea
              >
              <div class="character-count" id="bioCount">150/500</div>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">الاهتمامات</label>
            <div
              id="interestsContainer"
              class="border border-gray-200 rounded-xl p-4 min-h-[100px]"
            >
              <div class="skill-tag selected">التكنولوجيا</div>
              <div class="skill-tag selected">البرمجة</div>
              <div class="skill-tag">التصميم</div>
              <div class="skill-tag">الرياضة</div>
              <div class="skill-tag">القراءة</div>
              <div class="skill-tag">السفر</div>
              <div class="skill-tag">الطبخ</div>
              <div class="skill-tag">الموسيقى</div>
            </div>
            <p class="text-xs text-gray-500 mt-2">
              انقر على الاهتمامات لإضافتها أو إزالتها
            </p>
          </div>
        </div>

        <!-- Contact Information Tab -->
        <div id="contactTab" class="tab-content p-6">
          <h3 class="text-lg font-bold text-gray-800 mb-6 flex items-center">
            <svg
              class="w-5 h-5 ml-2 text-blue-600"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
              />
            </svg>
            معلومات الاتصال
          </h3>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="form-group">
              <label class="form-label">البريد الإلكتروني *</label>
              <input
                type="email"
                id="email"
                class="form-input"
                placeholder=" "
                value="ahmed@example.com"
                required
              />
              <div class="floating-label">البريد الإلكتروني</div>
              <div class="form-error">البريد الإلكتروني غير صحيح</div>
              <div class="form-success">✓ صحيح</div>
            </div>

            <div class="form-group">
              <label class="form-label">رقم الهاتف</label>
              <input
                type="tel"
                id="phone"
                class="form-input"
                placeholder=" "
                value="+966501234567"
              />
              <div class="floating-label">رقم الهاتف</div>
              <div class="form-error">رقم الهاتف غير صحيح</div>
              <div class="form-success">✓ صحيح</div>
            </div>

            <div class="form-group md:col-span-2">
              <label class="form-label">العنوان</label>
              <input
                type="text"
                id="address"
                class="form-input"
                placeholder=" "
                value="الرياض، المملكة العربية السعودية"
              />
              <div class="floating-label">العنوان</div>
            </div>

            <div class="form-group">
              <label class="form-label">المدينة</label>
              <input
                type="text"
                id="city"
                class="form-input"
                placeholder=" "
                value="الرياض"
              />
              <div class="floating-label">المدينة</div>
            </div>

            <div class="form-group">
              <label class="form-label">الرمز البريدي</label>
              <input
                type="text"
                id="zipCode"
                class="form-input"
                placeholder=" "
                value="12345"
              />
              <div class="floating-label">الرمز البريدي</div>
            </div>
          </div>

          <hr class="section-divider" />

          <h4 class="font-semibold text-gray-800 mb-4">
            وسائل التواصل الاجتماعي
          </h4>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="form-group social-input">
              <label class="form-label">تويتر</label>
              <svg class="social-icon" viewBox="0 0 24 24" fill="#1da1f2">
                <path
                  d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"
                />
              </svg>
              <input
                type="url"
                id="twitter"
                class="form-input"
                placeholder="https://twitter.com/username"
                value="https://twitter.com/ahmed_mohamed"
              />
            </div>

            <div class="form-group social-input">
              <label class="form-label">لينكد إن</label>
              <svg class="social-icon" viewBox="0 0 24 24" fill="#0077b5">
                <path
                  d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"
                />
              </svg>
              <input
                type="url"
                id="linkedin"
                class="form-input"
                placeholder="https://linkedin.com/in/username"
                value="https://linkedin.com/in/ahmed-mohamed"
              />
            </div>

            <div class="form-group social-input">
              <label class="form-label">إنستغرام</label>
              <svg class="social-icon" viewBox="0 0 24 24" fill="#e4405f">
                <path
                  d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"
                />
              </svg>
              <input
                type="url"
                id="instagram"
                class="form-input"
                placeholder="https://instagram.com/username"
              />
            </div>

            <div class="form-group social-input">
              <label class="form-label">الموقع الشخصي</label>
              <svg class="social-icon" viewBox="0 0 24 24" fill="#6b7280">
                <path
                  d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"
                />
              </svg>
              <input
                type="url"
                id="website"
                class="form-input"
                placeholder="https://example.com"
              />
            </div>
          </div>
        </div>

        <!-- Professional Information Tab -->
        <div id="professionalTab" class="tab-content p-6">
          <h3 class="text-lg font-bold text-gray-800 mb-6 flex items-center">
            <svg
              class="w-5 h-5 ml-2 text-blue-600"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2-2v2m8 0V6a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V8a2 2 0 012-2V6z"
              />
            </svg>
            المعلومات المهنية
          </h3>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="form-group">
              <label class="form-label">المسمى الوظيفي</label>
              <input
                type="text"
                id="jobTitle"
                class="form-input"
                placeholder=" "
                value="مطور تطبيقات أول"
              />
              <div class="floating-label">المسمى الوظيفي</div>
            </div>

            <div class="form-group">
              <label class="form-label">الشركة</label>
              <input
                type="text"
                id="company"
                class="form-input"
                placeholder=" "
                value="شركة التقنيات المتقدمة"
              />
              <div class="floating-label">الشركة</div>
            </div>

            <div class="form-group">
              <label class="form-label">سنوات الخبرة</label>
              <select id="experience" class="form-input">
                <option value="">اختر سنوات الخبرة</option>
                <option value="0-1">أقل من سنة</option>
                <option value="1-3">1-3 سنوات</option>
                <option value="3-5" selected>3-5 سنوات</option>
                <option value="5-10">5-10 سنوات</option>
                <option value="10+">أكثر من 10 سنوات</option>
              </select>
            </div>

            <div class="form-group">
              <label class="form-label">المجال</label>
              <select id="industry" class="form-input">
                <option value="">اختر المجال</option>
                <option value="tech" selected>التكنولوجيا</option>
                <option value="finance">المالية</option>
                <option value="healthcare">الصحة</option>
                <option value="education">التعليم</option>
                <option value="retail">التجارة</option>
                <option value="other">أخرى</option>
              </select>
            </div>
          </div>

          <hr class="section-divider" />

          <div class="form-group">
            <label class="form-label">المهارات التقنية</label>
            <div
              id="skillsContainer"
              class="border border-gray-200 rounded-xl p-4 min-h-[120px]"
            >
              <div class="skill-tag selected">JavaScript</div>
              <div class="skill-tag selected">React</div>
              <div class="skill-tag selected">Node.js</div>
              <div class="skill-tag">Python</div>
              <div class="skill-tag">PHP</div>
              <div class="skill-tag">MySQL</div>
              <div class="skill-tag">MongoDB</div>
              <div class="skill-tag">AWS</div>
              <div class="skill-tag">Docker</div>
              <div class="skill-tag">Git</div>
            </div>
            <div class="flex justify-between items-center mt-2">
              <p class="text-xs text-gray-500">
                انقر على المهارات لإضافتها أو إزالتها
              </p>
              <button
                onclick="addCustomSkill()"
                class="text-xs text-blue-600 hover:text-blue-700"
              >
                + إضافة مهارة جديدة
              </button>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">اللغات</label>
            <div class="space-y-4">
              <div
                class="flex items-center justify-between p-4 border border-gray-200 rounded-xl"
              >
                <div class="flex items-center space-x-3 space-x-reverse">
                  <span class="font-medium">العربية</span>
                  <span class="text-sm text-gray-500">اللغة الأم</span>
                </div>
                <div class="flex items-center space-x-2 space-x-reverse">
                  <span class="text-sm text-gray-600">ممتاز</span>
                  <div class="w-20 h-2 bg-gray-200 rounded-full">
                    <div class="w-full h-full bg-green-500 rounded-full"></div>
                  </div>
                </div>
              </div>

              <div
                class="flex items-center justify-between p-4 border border-gray-200 rounded-xl"
              >
                <div class="flex items-center space-x-3 space-x-reverse">
                  <span class="font-medium">الإنجليزية</span>
                </div>
                <div class="flex items-center space-x-2 space-x-reverse">
                  <span class="text-sm text-gray-600">جيد جداً</span>
                  <div class="w-20 h-2 bg-gray-200 rounded-full">
                    <div class="w-4/5 h-full bg-blue-500 rounded-full"></div>
                  </div>
                </div>
              </div>

              <button
                onclick="addLanguage()"
                class="w-full p-3 border-2 border-dashed border-gray-300 rounded-xl text-gray-600 hover:border-blue-400 hover:text-blue-600 transition-colors"
              >
                + إضافة لغة جديدة
              </button>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">الشهادات والدورات</label>
            <div class="space-y-3">
              <div
                class="flex items-center justify-between p-4 border border-gray-200 rounded-xl"
              >
                <div>
                  <h4 class="font-medium">شهادة AWS Solutions Architect</h4>
                  <p class="text-sm text-gray-600">
                    Amazon Web Services • 2023
                  </p>
                </div>
                <button
                  onclick="removeCertificate(this)"
                  class="text-red-500 hover:text-red-700"
                >
                  <svg
                    class="w-5 h-5"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1-1H8a1 1 0 00-1 1v3M4 7h16"
                    />
                  </svg>
                </button>
              </div>

              <button
                onclick="addCertificate()"
                class="w-full p-3 border-2 border-dashed border-gray-300 rounded-xl text-gray-600 hover:border-blue-400 hover:text-blue-600 transition-colors"
              >
                + إضافة شهادة أو دورة
              </button>
            </div>
          </div>
        </div>

        <!-- Privacy Settings Tab -->
        <div id="privacyTab" class="tab-content p-6">
          <h3 class="text-lg font-bold text-gray-800 mb-6 flex items-center">
            <svg
              class="w-5 h-5 ml-2 text-blue-600"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"
              />
            </svg>
            إعدادات الخصوصية
          </h3>

          <div class="space-y-6">
            <div
              class="flex items-center justify-between p-4 border border-gray-200 rounded-xl"
            >
              <div>
                <h4 class="font-medium">إظهار الملف الشخصي للعامة</h4>
                <p class="text-sm text-gray-600">
                  السماح للآخرين بمشاهدة ملفك الشخصي
                </p>
              </div>
              <label class="toggle-switch">
                <input type="checkbox" checked />
                <span class="toggle-slider"></span>
              </label>
            </div>

            <div
              class="flex items-center justify-between p-4 border border-gray-200 rounded-xl"
            >
              <div>
                <h4 class="font-medium">إظهار معلومات الاتصال</h4>
                <p class="text-sm text-gray-600">
                  عرض البريد الإلكتروني ورقم الهاتف
                </p>
              </div>
              <label class="toggle-switch">
                <input type="checkbox" />
                <span class="toggle-slider"></span>
              </label>
            </div>

            <div
              class="flex items-center justify-between p-4 border border-gray-200 rounded-xl"
            >
              <div>
                <h4 class="font-medium">السماح بالرسائل المباشرة</h4>
                <p class="text-sm text-gray-600">
                  تلقي رسائل من المستخدمين الآخرين
                </p>
              </div>
              <label class="toggle-switch">
                <input type="checkbox" checked />
                <span class="toggle-slider"></span>
              </label>
            </div>

            <div
              class="flex items-center justify-between p-4 border border-gray-200 rounded-xl"
            >
              <div>
                <h4 class="font-medium">إشعارات البريد الإلكتروني</h4>
                <p class="text-sm text-gray-600">
                  تلقي إشعارات عبر البريد الإلكتروني
                </p>
              </div>
              <label class="toggle-switch">
                <input type="checkbox" checked />
                <span class="toggle-slider"></span>
              </label>
            </div>

            <div
              class="flex items-center justify-between p-4 border border-gray-200 rounded-xl"
            >
              <div>
                <h4 class="font-medium">إشعارات الهاتف</h4>
                <p class="text-sm text-gray-600">
                  تلقي إشعارات عبر الرسائل النصية
                </p>
              </div>
              <label class="toggle-switch">
                <input type="checkbox" />
                <span class="toggle-slider"></span>
              </label>
            </div>

            <div
              class="flex items-center justify-between p-4 border border-gray-200 rounded-xl"
            >
              <div>
                <h4 class="font-medium">مشاركة البيانات للتحليل</h4>
                <p class="text-sm text-gray-600">المساعدة في تحسين الخدمة</p>
              </div>
              <label class="toggle-switch">
                <input type="checkbox" checked />
                <span class="toggle-slider"></span>
              </label>
            </div>
          </div>

          <hr class="section-divider" />

          <div class="bg-red-50 border border-red-200 rounded-xl p-4">
            <h4 class="font-medium text-red-800 mb-2 flex items-center">
              <svg
                class="w-5 h-5 ml-2"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"
                />
              </svg>
              منطقة الخطر
            </h4>
            <p class="text-sm text-red-700 mb-4">
              هذه الإجراءات لا يمكن التراجع عنها
            </p>
            <div class="space-y-3">
              <button
                onclick="deactivateAccount()"
                class="w-full p-3 bg-red-100 text-red-700 rounded-xl hover:bg-red-200 transition-colors"
              >
                إلغاء تفعيل الحساب
              </button>
              <button
                onclick="deleteAccount()"
                class="w-full p-3 bg-red-600 text-white rounded-xl hover:bg-red-700 transition-colors"
              >
                حذف الحساب نهائياً
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="flex justify-between items-center mt-8">
        <button
          onclick="previewProfile()"
          class="px-6 py-3 bg-gray-200 text-gray-700 rounded-xl font-medium hover:bg-gray-300 transition-colors"
        >
          معاينة الملف الشخصي
        </button>
        <div class="flex space-x-3 space-x-reverse">
          <button
            onclick="saveDraft()"
            class="px-6 py-3 bg-yellow-100 text-yellow-700 rounded-xl font-medium hover:bg-yellow-200 transition-colors"
          >
            حفظ كمسودة
          </button>
          <button
            onclick="saveProfile()"
            class="px-8 py-3 bg-blue-600 text-white rounded-xl font-medium hover:bg-blue-700 transition-colors"
          >
            حفظ التغييرات
          </button>
        </div>
      </div>
    </main>

    <!-- Floating Save Button -->
    <div id="floatingSave" class="floating-save">
      <button
        onclick="saveProfile()"
        class="px-8 py-4 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 transition-all flex items-center space-x-2 space-x-reverse"
      >
        <svg
          class="w-5 h-5"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M5 13l4 4L19 7"
          />
        </svg>
        <span>حفظ التغييرات</span>
      </button>
    </div>

    <script>
      let hasUnsavedChanges = false;
      let originalFormData = {};

      // Initialize the app
      document.addEventListener("DOMContentLoaded", function () {
        initializeForm();
        setupEventListeners();
        updateCharacterCount();
        calculateCompletionPercentage();
      });

      function initializeForm() {
        // Store original form data
        const formElements = document.querySelectorAll(
          "input, select, textarea"
        );
        formElements.forEach((element) => {
          originalFormData[element.id] = element.value;
        });

        // Setup skill tags
        setupSkillTags();
        setupInterestTags();
      }

      function setupEventListeners() {
        // Form change detection
        const formElements = document.querySelectorAll(
          "input, select, textarea"
        );
        formElements.forEach((element) => {
          element.addEventListener("input", function () {
            detectChanges();
            validateField(this);
            updateCharacterCount();
            calculateCompletionPercentage();
          });

          element.addEventListener("blur", function () {
            validateField(this);
          });
        });

        // Username availability check
        document
          .getElementById("username")
          .addEventListener("input", debounce(checkUsernameAvailability, 500));

        // Email validation
        document
          .getElementById("email")
          .addEventListener("input", debounce(validateEmail, 300));

        // Phone validation
        document
          .getElementById("phone")
          .addEventListener("input", validatePhone);
      }

      function setupSkillTags() {
        const container = document.getElementById("skillsContainer");
        const tags = container.querySelectorAll(".skill-tag");

        tags.forEach((tag) => {
          tag.addEventListener("click", function () {
            this.classList.toggle("selected");
            detectChanges();
          });
        });
      }

      function setupInterestTags() {
        const container = document.getElementById("interestsContainer");
        const tags = container.querySelectorAll(".skill-tag");

        tags.forEach((tag) => {
          tag.addEventListener("click", function () {
            this.classList.toggle("selected");
            detectChanges();
          });
        });
      }

      function switchTab(tabName) {
        // Hide all tab contents
        document.querySelectorAll(".tab-content").forEach((content) => {
          content.classList.remove("active");
        });

        // Remove active class from all tab buttons
        document.querySelectorAll(".tab-button").forEach((button) => {
          button.classList.remove("active");
        });

        // Show selected tab content
        document.getElementById(tabName + "Tab").classList.add("active");

        // Add active class to clicked button
        event.target.classList.add("active");
      }

      function detectChanges() {
        const formElements = document.querySelectorAll(
          "input, select, textarea"
        );
        let hasChanges = false;

        formElements.forEach((element) => {
          if (originalFormData[element.id] !== element.value) {
            hasChanges = true;
          }
        });

        hasUnsavedChanges = hasChanges;

        // Show/hide floating save button
        const floatingSave = document.getElementById("floatingSave");
        if (hasChanges) {
          floatingSave.classList.add("visible");
        } else {
          floatingSave.classList.remove("visible");
        }
      }

      function validateField(field) {
        const value = field.value.trim();
        const fieldType = field.type;
        const isRequired = field.hasAttribute("required");

        // Remove previous validation classes
        field.classList.remove("error", "success");

        // Hide previous messages
        const errorMsg = field.parentNode.querySelector(".form-error");
        const successMsg = field.parentNode.querySelector(".form-success");
        if (errorMsg) errorMsg.style.display = "none";
        if (successMsg) successMsg.style.display = "none";

        // Skip validation if field is empty and not required
        if (!value && !isRequired) return;

        let isValid = true;
        let errorMessage = "";

        // Required field validation
        if (isRequired && !value) {
          isValid = false;
          errorMessage = "هذا الحقل مطلوب";
        }
        // Email validation
        else if (fieldType === "email" && value) {
          const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
          if (!emailRegex.test(value)) {
            isValid = false;
            errorMessage = "البريد الإلكتروني غير صحيح";
          }
        }
        // Phone validation
        else if (field.id === "phone" && value) {
          const phoneRegex = /^[\+]?[0-9\s\-\(\)]{10,}$/;
          if (!phoneRegex.test(value)) {
            isValid = false;
            errorMessage = "رقم الهاتف غير صحيح";
          }
        }
        // Username validation
        else if (field.id === "username" && value) {
          const usernameRegex = /^[a-zA-Z0-9_]{3,20}$/;
          if (!usernameRegex.test(value)) {
            isValid = false;
            errorMessage = "اسم المستخدم يجب أن يحتوي على 3-20 حرف أو رقم أو _";
          }
        }

        // Apply validation result
        if (isValid) {
          field.classList.add("success");
          if (successMsg) successMsg.style.display = "block";
        } else {
          field.classList.add("error");
          if (errorMsg) {
            errorMsg.textContent = errorMessage;
            errorMsg.style.display = "block";
          }
        }

        return isValid;
      }

      function checkUsernameAvailability() {
        const username = document.getElementById("username").value.trim();
        if (username.length < 3) return;

        // Simulate API call
        setTimeout(() => {
          const isAvailable = Math.random() > 0.3; // 70% chance of being available
          const field = document.getElementById("username");
          const errorMsg = field.parentNode.querySelector(".form-error");
          const successMsg = field.parentNode.querySelector(".form-success");

          field.classList.remove("error", "success");
          if (errorMsg) errorMsg.style.display = "none";
          if (successMsg) successMsg.style.display = "none";

          if (isAvailable) {
            field.classList.add("success");
            if (successMsg) {
              successMsg.textContent = "✓ اسم المستخدم متاح";
              successMsg.style.display = "block";
            }
          } else {
            field.classList.add("error");
            if (errorMsg) {
              errorMsg.textContent = "اسم المستخدم غير متاح";
              errorMsg.style.display = "block";
            }
          }
        }, 1000);
      }

      function validateEmail() {
        const email = document.getElementById("email").value.trim();
        if (!email) return;

        // Simulate email validation
        setTimeout(() => {
          const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
          const isValid = emailRegex.test(email);
          const field = document.getElementById("email");

          validateField(field);
        }, 500);
      }

      function validatePhone() {
        const phone = document.getElementById("phone").value.trim();
        if (!phone) return;

        const field = document.getElementById("phone");
        validateField(field);
      }

      function updateCharacterCount() {
        const bioTextarea = document.getElementById("bio");
        const bioCount = document.getElementById("bioCount");

        if (bioTextarea && bioCount) {
          const currentLength = bioTextarea.value.length;
          const maxLength = bioTextarea.getAttribute("maxlength");

          bioCount.textContent = `${currentLength}/${maxLength}`;

          // Update color based on usage
          bioCount.classList.remove("warning", "error");
          if (currentLength > maxLength * 0.8) {
            bioCount.classList.add("warning");
          }
          if (currentLength >= maxLength) {
            bioCount.classList.add("error");
          }
        }
      }

      function calculateCompletionPercentage() {
        const requiredFields = document.querySelectorAll(
          "input[required], select[required]"
        );
        const filledFields = Array.from(requiredFields).filter(
          (field) => field.value.trim() !== ""
        );

        // Add points for optional but important fields
        let totalPoints = requiredFields.length * 10; // Required fields worth 10 points each
        let earnedPoints = filledFields.length * 10;

        // Bonus points for optional fields
        const optionalFields = [
          "birthDate",
          "phone",
          "address",
          "jobTitle",
          "company",
          "bio",
        ];

        optionalFields.forEach((fieldId) => {
          const field = document.getElementById(fieldId);
          if (field && field.value.trim()) {
            earnedPoints += 5;
          }
          totalPoints += 5;
        });

        // Bonus for skills and interests
        const selectedSkills = document.querySelectorAll(
          "#skillsContainer .skill-tag.selected"
        ).length;
        const selectedInterests = document.querySelectorAll(
          "#interestsContainer .skill-tag.selected"
        ).length;

        earnedPoints += Math.min(selectedSkills * 2, 10);
        earnedPoints += Math.min(selectedInterests * 2, 10);
        totalPoints += 20;

        const percentage = Math.round((earnedPoints / totalPoints) * 100);

        document.getElementById("completionPercentage").textContent =
          percentage + "%";
        document.getElementById("progressFill").style.width = percentage + "%";
      }

      function addCustomSkill() {
        const skillName = prompt("أدخل اسم المهارة الجديدة:");
        if (skillName && skillName.trim()) {
          const container = document.getElementById("skillsContainer");
          const skillTag = document.createElement("div");
          skillTag.className = "skill-tag selected";
          skillTag.textContent = skillName.trim();
          skillTag.addEventListener("click", function () {
            this.classList.toggle("selected");
            detectChanges();
          });
          container.appendChild(skillTag);
          detectChanges();
        }
      }

      function addLanguage() {
        const languageName = prompt("أدخل اسم اللغة:");
        if (languageName && languageName.trim()) {
          // This would typically open a modal for more detailed language input
          showNotification(
            "تم إضافة اللغة بنجاح! (هذه ميزة تجريبية)",
            "success"
          );
        }
      }

      function addCertificate() {
        const certName = prompt("أدخل اسم الشهادة أو الدورة:");
        if (certName && certName.trim()) {
          // This would typically open a modal for more detailed certificate input
          showNotification(
            "تم إضافة الشهادة بنجاح! (هذه ميزة تجريبية)",
            "success"
          );
        }
      }

      function removeCertificate(button) {
        if (confirm("هل تريد حذف هذه الشهادة؟")) {
          button.closest(".flex").remove();
          detectChanges();
        }
      }

      function changeProfilePicture() {
        // This would typically open the profile picture change page
        alert("سيتم فتح صفحة تغيير الصورة الشخصية");
      }

      function previewProfile() {
        // This would show a preview of the profile
        showNotification("معاينة الملف الشخصي (ميزة قادمة)", "info");
      }

      function saveDraft() {
        showLoadingOverlay();

        setTimeout(() => {
          hideLoadingOverlay();
          showNotification("تم حفظ المسودة بنجاح!", "success");
        }, 1500);
      }

      function saveProfile() {
        // Validate all required fields
        const requiredFields = document.querySelectorAll(
          "input[required], select[required]"
        );
        let isValid = true;

        requiredFields.forEach((field) => {
          if (!validateField(field)) {
            isValid = false;
          }
        });

        if (!isValid) {
          showNotification("يرجى تصحيح الأخطاء قبل الحفظ", "error");
          return;
        }

        showLoadingOverlay();

        // Simulate save process
        setTimeout(() => {
          hideLoadingOverlay();

          // Update original form data
          const formElements = document.querySelectorAll(
            "input, select, textarea"
          );
          formElements.forEach((element) => {
            originalFormData[element.id] = element.value;
          });

          hasUnsavedChanges = false;
          document.getElementById("floatingSave").classList.remove("visible");

          showNotification("تم حفظ الملف الشخصي بنجاح!", "success");

          // Redirect after successful save
          setTimeout(() => {
            goBack();
          }, 2000);
        }, 2000);
      }

      function resetForm() {
        if (hasUnsavedChanges) {
          if (!confirm("هل تريد إلغاء جميع التغييرات غير المحفوظة؟")) {
            return;
          }
        }

        // Reset all form fields to original values
        const formElements = document.querySelectorAll(
          "input, select, textarea"
        );
        formElements.forEach((element) => {
          element.value = originalFormData[element.id] || "";
          element.classList.remove("error", "success");
        });

        // Reset skill selections
        document.querySelectorAll(".skill-tag").forEach((tag) => {
          tag.classList.remove("selected");
        });

        // Re-select original skills (this would come from saved data)
        const originalSkills = [
          "JavaScript",
          "React",
          "Node.js",
          "التكنولوجيا",
          "البرمجة",
        ];
        originalSkills.forEach((skill) => {
          const skillTag = Array.from(
            document.querySelectorAll(".skill-tag")
          ).find((tag) => tag.textContent === skill);
          if (skillTag) {
            skillTag.classList.add("selected");
          }
        });

        hasUnsavedChanges = false;
        document.getElementById("floatingSave").classList.remove("visible");

        updateCharacterCount();
        calculateCompletionPercentage();

        showNotification("تم إعادة تعيين النموذج", "info");
      }

      function goBack() {
        if (hasUnsavedChanges) {
          if (!confirm("لديك تغييرات غير محفوظة. هل تريد المغادرة؟")) {
            return;
          }
        }

        // This would navigate back to the profile page
        alert("العودة إلى صفحة الملف الشخصي");
      }

      function deactivateAccount() {
        if (
          confirm(
            "هل أنت متأكد من إلغاء تفعيل حسابك؟ يمكنك إعادة تفعيله لاحقاً."
          )
        ) {
          showNotification("تم إلغاء تفعيل الحساب", "warning");
        }
      }

      function deleteAccount() {
        const confirmation = prompt(
          'لحذف حسابك نهائياً، اكتب "حذف" في المربع أدناه:'
        );
        if (confirmation === "حذف") {
          if (confirm("هذا الإجراء لا يمكن التراجع عنه. هل أنت متأكد؟")) {
            showNotification("تم حذف الحساب نهائياً", "error");
          }
        }
      }

      function showLoadingOverlay() {
        document.getElementById("loadingOverlay").classList.add("active");
      }

      function hideLoadingOverlay() {
        document.getElementById("loadingOverlay").classList.remove("active");
      }

      function showNotification(message, type = "success") {
        const notification = document.createElement("div");
        notification.className = "notification";

        const icon =
          type === "success"
            ? "✓"
            : type === "error"
            ? "✗"
            : type === "warning"
            ? "⚠"
            : "ℹ";
        const color =
          type === "success"
            ? "#10b981"
            : type === "error"
            ? "#ef4444"
            : type === "warning"
            ? "#f59e0b"
            : "#3b82f6";

        notification.style.borderLeftColor = color;
        notification.innerHTML = `
                <div class="flex items-center">
                    <span class="text-2xl ml-3" style="color: ${color}">${icon}</span>
                    <span class="text-gray-800">${message}</span>
                </div>
            `;

        document.body.appendChild(notification);

        // Show notification
        setTimeout(() => {
          notification.classList.add("show");
        }, 100);

        // Hide notification after 4 seconds
        setTimeout(() => {
          notification.classList.remove("show");
          setTimeout(() => {
            document.body.removeChild(notification);
          }, 300);
        }, 4000);
      }

      function debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
          const later = () => {
            clearTimeout(timeout);
            func(...args);
          };
          clearTimeout(timeout);
          timeout = setTimeout(later, wait);
        };
      }

      // Prevent accidental page leave
      window.addEventListener("beforeunload", function (e) {
        if (hasUnsavedChanges) {
          e.preventDefault();
          e.returnValue = "";
        }
      });
    </script>
    <script>
      (function () {
        function c() {
          var b = a.contentDocument || a.contentWindow.document;
          if (b) {
            var d = b.createElement("script");
            d.innerHTML =
              "window.__CF$cv$params={r:'974b314a150f997d',t:'MTc1NjEyNTk4OS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";
            b.getElementsByTagName("head")[0].appendChild(d);
          }
        }
        if (document.body) {
          var a = document.createElement("iframe");
          a.height = 1;
          a.width = 1;
          a.style.position = "absolute";
          a.style.top = 0;
          a.style.left = 0;
          a.style.border = "none";
          a.style.visibility = "hidden";
          document.body.appendChild(a);
          if ("loading" !== document.readyState) c();
          else if (window.addEventListener)
            document.addEventListener("DOMContentLoaded", c);
          else {
            var e = document.onreadystatechange || function () {};
            document.onreadystatechange = function (b) {
              e(b);
              "loading" !== document.readyState &&
                ((document.onreadystatechange = e), c());
            };
          }
        }
      })();
    </script>
  </body>
</html>
