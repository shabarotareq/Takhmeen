<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>تخمين العقارات - تطبيق تخمين</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Cairo", sans-serif;
      }
      .gradient-bg {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }
      .step-active {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }
      .step-completed {
        background: #10b981;
      }
      .step-inactive {
        background: #e5e7eb;
      }
      .card-hover {
        transition: all 0.3s ease;
      }
      .card-hover:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      }
      .property-card {
        border: 2px solid transparent;
        transition: all 0.3s ease;
      }
      .property-card.selected {
        border-color: #667eea;
        background: #f0f4ff;
      }
      .slider-thumb::-webkit-slider-thumb {
        appearance: none;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: #667eea;
        cursor: pointer;
      }
      .slider-thumb::-moz-range-thumb {
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: #667eea;
        cursor: pointer;
        border: none;
      }
    </style>
  </head>
  <body class="bg-gray-50">
    <!-- Header -->
    <header class="gradient-bg text-white p-6 shadow-lg">
      <div class="flex items-center justify-between mb-4">
        <button
          onclick="goBack()"
          class="w-10 h-10 bg-white bg-opacity-20 rounded-full flex items-center justify-center"
        >
          <svg
            class="w-5 h-5"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M15 19l-7-7 7-7"
            />
          </svg>
        </button>
        <div class="text-center">
          <h1 class="text-2xl font-bold">تخمين العقارات</h1>
          <p class="text-sm opacity-90">احصل على تقييم دقيق لعقارك</p>
        </div>
        <div class="w-10 h-10"></div>
      </div>

      <!-- Progress Steps -->
      <div class="flex items-center justify-center space-x-4 space-x-reverse">
        <div class="flex items-center">
          <div
            id="step1"
            class="step-active w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-bold"
          >
            1
          </div>
          <span class="mr-2 text-sm">نوع العقار</span>
        </div>
        <div class="w-8 h-0.5 bg-white bg-opacity-30"></div>
        <div class="flex items-center">
          <div
            id="step2"
            class="step-inactive w-8 h-8 rounded-full flex items-center justify-center text-gray-600 text-sm font-bold"
          >
            2
          </div>
          <span class="mr-2 text-sm opacity-70">التفاصيل</span>
        </div>
        <div class="w-8 h-0.5 bg-white bg-opacity-30"></div>
        <div class="flex items-center">
          <div
            id="step3"
            class="step-inactive w-8 h-8 rounded-full flex items-center justify-center text-gray-600 text-sm font-bold"
          >
            3
          </div>
          <span class="mr-2 text-sm opacity-70">النتيجة</span>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="p-6 pb-24">
      <!-- Step 1: Property Type Selection -->
      <div id="propertyTypeStep" class="space-y-6">
        <div class="text-center mb-8">
          <h2 class="text-2xl font-bold text-gray-800 mb-2">اختر نوع العقار</h2>
          <p class="text-gray-600">حدد نوع العقار الذي تريد تقييمه</p>
        </div>

        <div class="grid grid-cols-2 gap-4">
          <div
            class="property-card card-hover bg-white rounded-2xl p-6 cursor-pointer text-center"
            onclick="selectPropertyType('apartment')"
          >
            <div
              class="w-16 h-16 bg-blue-100 rounded-2xl flex items-center justify-center mb-4 mx-auto"
            >
              <svg
                class="w-8 h-8 text-blue-600"
                fill="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  d="M17 11V3H7v4H3v14h8v-4h2v4h8V11h-4zM7 19H5v-2h2v2zm0-4H5v-2h2v2zm0-4H5V9h2v2zm4 8H9v-2h2v2zm0-4H9v-2h2v2zm0-4H9V9h2v2zm0-4H9V5h2v2zm4 12h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2V9h2v2zm4 8h-2v-2h2v2zm0-4h-2v-2h2v2z"
                />
              </svg>
            </div>
            <h3 class="font-bold text-gray-800 mb-1">شقة سكنية</h3>
            <p class="text-sm text-gray-600">شقق في مباني سكنية</p>
          </div>

          <div
            class="property-card card-hover bg-white rounded-2xl p-6 cursor-pointer text-center"
            onclick="selectPropertyType('villa')"
          >
            <div
              class="w-16 h-16 bg-green-100 rounded-2xl flex items-center justify-center mb-4 mx-auto"
            >
              <svg
                class="w-8 h-8 text-green-600"
                fill="currentColor"
                viewBox="0 0 24 24"
              >
                <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" />
              </svg>
            </div>
            <h3 class="font-bold text-gray-800 mb-1">فيلا</h3>
            <p class="text-sm text-gray-600">منازل مستقلة وفلل</p>
          </div>

          <div
            class="property-card card-hover bg-white rounded-2xl p-6 cursor-pointer text-center"
            onclick="selectPropertyType('land')"
          >
            <div
              class="w-16 h-16 bg-yellow-100 rounded-2xl flex items-center justify-center mb-4 mx-auto"
            >
              <svg
                class="w-8 h-8 text-yellow-600"
                fill="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"
                />
              </svg>
            </div>
            <h3 class="font-bold text-gray-800 mb-1">أرض</h3>
            <p class="text-sm text-gray-600">أراضي سكنية وتجارية</p>
          </div>

          <div
            class="property-card card-hover bg-white rounded-2xl p-6 cursor-pointer text-center"
            onclick="selectPropertyType('commercial')"
          >
            <div
              class="w-16 h-16 bg-purple-100 rounded-2xl flex items-center justify-center mb-4 mx-auto"
            >
              <svg
                class="w-8 h-8 text-purple-600"
                fill="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  d="M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z"
                />
              </svg>
            </div>
            <h3 class="font-bold text-gray-800 mb-1">عقار تجاري</h3>
            <p class="text-sm text-gray-600">محلات ومكاتب تجارية</p>
          </div>
        </div>
      </div>

      <!-- Step 2: Property Details -->
      <div id="propertyDetailsStep" class="hidden space-y-6">
        <div class="text-center mb-8">
          <h2 class="text-2xl font-bold text-gray-800 mb-2">تفاصيل العقار</h2>
          <p class="text-gray-600">أدخل المعلومات التفصيلية للعقار</p>
        </div>

        <!-- Location Section -->
        <div class="bg-white rounded-2xl p-6 shadow-lg">
          <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center">
            <svg
              class="w-5 h-5 ml-2 text-blue-600"
              fill="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"
              />
            </svg>
            الموقع
          </h3>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >المدينة</label
              >
              <select
                class="w-full p-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"
              >
                <option>اختر المدينة</option>
                <option>نابلس</option>
                <option>رام الله</option>
                <option>طولكرم</option>
                <option>جنين</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >المنطقة</label
              >
              <select
                class="w-full p-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"
              >
                <option>اختر المنطقة</option>
                <option>رفيديا</option>
                <option>المخفية</option>
                <option>الجبل الشمالي</option>
                <option>الضاحية</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Property Specifications -->
        <div class="bg-white rounded-2xl p-6 shadow-lg">
          <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center">
            <svg
              class="w-5 h-5 ml-2 text-green-600"
              fill="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"
              />
            </svg>
            مواصفات العقار
          </h3>

          <!-- Area Slider -->
          <div class="mb-6">
            <label class="block text-sm font-medium text-gray-700 mb-2"
              >المساحة (متر مربع)</label
            >
            <div class="px-3">
              <input
                type="range"
                min="50"
                max="500"
                value="120"
                class="slider-thumb w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"
                oninput="updateAreaValue(this.value)"
              />
              <div class="flex justify-between text-sm text-gray-500 mt-1">
                <span>50</span>
                <span id="areaValue" class="font-bold text-blue-600"
                  >120 متر مربع</span
                >
                <span>500</span>
              </div>
            </div>
          </div>

          <div class="grid grid-cols-2 gap-4 mb-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >عدد الغرف</label
              >
              <select
                class="w-full p-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"
              >
                <option>1 غرفة</option>
                <option>2 غرفة</option>
                <option>3 غرف</option>
                <option>4 غرف</option>
                <option>5+ غرف</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >عدد الحمامات</label
              >
              <select
                class="w-full p-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"
              >
                <option>1 حمام</option>
                <option>2 حمام</option>
                <option>3 حمامات</option>
                <option>4+ حمامات</option>
              </select>
            </div>
          </div>

          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >رقم الطابق</label
              >
              <select
                class="w-full p-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"
              >
                <option>الأرضي</option>
                <option>الأول</option>
                <option>الثاني</option>
                <option>الثالث</option>
                <option>الرابع فما فوق</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >عمر البناء</label
              >
              <select
                class="w-full p-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"
              >
                <option>جديد (0-2 سنة)</option>
                <option>حديث (3-5 سنوات)</option>
                <option>متوسط (6-10 سنوات)</option>
                <option>قديم (أكثر من 10 سنوات)</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Property Condition -->
        <div class="bg-white rounded-2xl p-6 shadow-lg">
          <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center">
            <svg
              class="w-5 h-5 ml-2 text-yellow-600"
              fill="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"
              />
            </svg>
            حالة العقار والتشطيبات
          </h3>

          <div class="grid grid-cols-3 gap-3 mb-4">
            <button
              class="condition-btn p-4 border-2 border-gray-200 rounded-xl text-center transition-all"
              onclick="selectCondition(this, 'excellent')"
            >
              <div
                class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2"
              >
                <svg
                  class="w-4 h-4 text-green-600"
                  fill="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
              </div>
              <span class="text-sm font-medium">ممتازة</span>
            </button>
            <button
              class="condition-btn p-4 border-2 border-gray-200 rounded-xl text-center transition-all"
              onclick="selectCondition(this, 'good')"
            >
              <div
                class="w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-2"
              >
                <svg
                  class="w-4 h-4 text-yellow-600"
                  fill="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"
                  />
                </svg>
              </div>
              <span class="text-sm font-medium">جيدة</span>
            </button>
            <button
              class="condition-btn p-4 border-2 border-gray-200 rounded-xl text-center transition-all"
              onclick="selectCondition(this, 'average')"
            >
              <div
                class="w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-2"
              >
                <svg
                  class="w-4 h-4 text-orange-600"
                  fill="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126z"
                  />
                </svg>
              </div>
              <span class="text-sm font-medium">متوسطة</span>
            </button>
          </div>

          <!-- Additional Features -->
          <div class="space-y-3">
            <h4 class="font-medium text-gray-700">المميزات الإضافية:</h4>
            <div class="grid grid-cols-2 gap-3">
              <label class="flex items-center space-x-3 space-x-reverse">
                <input
                  type="checkbox"
                  class="w-4 h-4 text-blue-600 rounded focus:ring-blue-500"
                />
                <span class="text-sm">مصعد</span>
              </label>
              <label class="flex items-center space-x-3 space-x-reverse">
                <input
                  type="checkbox"
                  class="w-4 h-4 text-blue-600 rounded focus:ring-blue-500"
                />
                <span class="text-sm">كراج</span>
              </label>
              <label class="flex items-center space-x-3 space-x-reverse">
                <input
                  type="checkbox"
                  class="w-4 h-4 text-blue-600 rounded focus:ring-blue-500"
                />
                <span class="text-sm">بلكونة</span>
              </label>
              <label class="flex items-center space-x-3 space-x-reverse">
                <input
                  type="checkbox"
                  class="w-4 h-4 text-blue-600 rounded focus:ring-blue-500"
                />
                <span class="text-sm">حديقة</span>
              </label>
            </div>
          </div>
        </div>

        <!-- Legal Status -->
        <div class="bg-white rounded-2xl p-6 shadow-lg">
          <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center">
            <svg
              class="w-5 h-5 ml-2 text-red-600"
              fill="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 2 2h8c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"
              />
            </svg>
            الحالة القانونية
          </h3>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >نوع التسجيل</label
              >
              <select
                class="w-full p-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"
              >
                <option>طابو أخضر</option>
                <option>سجل مالي</option>
                <option>حكم محكمة</option>
                <option>أخرى</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >حالة الرهن</label
              >
              <select
                class="w-full p-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"
              >
                <option>بدون رهن</option>
                <option>مرهون جزئياً</option>
                <option>مرهون كلياً</option>
              </select>
            </div>
          </div>
        </div>
      </div>

      <!-- Step 3: Results -->
      <div id="resultsStep" class="hidden space-y-6">
        <div class="text-center mb-8">
          <h2 class="text-2xl font-bold text-gray-800 mb-2">نتيجة التخمين</h2>
          <p class="text-gray-600">تقييم دقيق بناءً على المعلومات المدخلة</p>
        </div>

        <!-- Main Result Card -->
        <div class="bg-white rounded-2xl p-8 shadow-lg text-center">
          <div
            class="w-20 h-20 gradient-bg rounded-full flex items-center justify-center mx-auto mb-6"
          >
            <svg
              class="w-10 h-10 text-white"
              fill="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"
              />
            </svg>
          </div>
          <h3 class="text-3xl font-bold text-gray-800 mb-2">85,000 دينار</h3>
          <p class="text-gray-600 mb-4">القيمة التقديرية للعقار</p>
          <div class="bg-gray-50 rounded-xl p-4">
            <div class="flex justify-between items-center mb-2">
              <span class="text-sm text-gray-600">النطاق السعري:</span>
              <span class="text-sm font-medium">78,000 - 92,000 دينار</span>
            </div>
            <div class="flex justify-between items-center">
              <span class="text-sm text-gray-600">سعر المتر المربع:</span>
              <span class="text-sm font-medium">708 دينار/م²</span>
            </div>
          </div>
        </div>

        <!-- Market Analysis -->
        <div class="bg-white rounded-2xl p-6 shadow-lg">
          <h3 class="text-lg font-bold text-gray-800 mb-4">تحليل السوق</h3>
          <div class="space-y-4">
            <div
              class="flex items-center justify-between p-3 bg-green-50 rounded-xl"
            >
              <span class="text-sm text-gray-700">متوسط أسعار المنطقة</span>
              <span class="text-sm font-bold text-green-600">720 دينار/م²</span>
            </div>
            <div
              class="flex items-center justify-between p-3 bg-blue-50 rounded-xl"
            >
              <span class="text-sm text-gray-700">اتجاه السوق</span>
              <span class="text-sm font-bold text-blue-600">مستقر ↗️</span>
            </div>
            <div
              class="flex items-center justify-between p-3 bg-yellow-50 rounded-xl"
            >
              <span class="text-sm text-gray-700">مستوى الطلب</span>
              <span class="text-sm font-bold text-yellow-600">عالي</span>
            </div>
          </div>
        </div>

        <!-- Recommendations -->
        <div class="bg-white rounded-2xl p-6 shadow-lg">
          <h3 class="text-lg font-bold text-gray-800 mb-4">
            توصيات لزيادة القيمة
          </h3>
          <div class="space-y-3">
            <div
              class="flex items-start space-x-3 space-x-reverse p-3 bg-blue-50 rounded-xl"
            >
              <div
                class="w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5"
              >
                <span class="text-white text-xs font-bold">1</span>
              </div>
              <div>
                <p class="text-sm font-medium text-gray-800">تحديث التشطيبات</p>
                <p class="text-xs text-gray-600">قد يزيد القيمة بنسبة 8-12%</p>
              </div>
            </div>
            <div
              class="flex items-start space-x-3 space-x-reverse p-3 bg-green-50 rounded-xl"
            >
              <div
                class="w-6 h-6 bg-green-600 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5"
              >
                <span class="text-white text-xs font-bold">2</span>
              </div>
              <div>
                <p class="text-sm font-medium text-gray-800">
                  إضافة بلكونة أو تراس
                </p>
                <p class="text-xs text-gray-600">قد يزيد القيمة بنسبة 5-8%</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Action Buttons -->
    <div
      class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-6"
    >
      <div class="flex space-x-4 space-x-reverse">
        <button
          id="backBtn"
          onclick="previousStep()"
          class="hidden flex-1 bg-gray-100 text-gray-700 py-3 px-6 rounded-xl font-medium"
        >
          السابق
        </button>
        <button
          id="nextBtn"
          onclick="nextStep()"
          class="flex-1 gradient-bg text-white py-3 px-6 rounded-xl font-medium"
        >
          التالي
        </button>
        <button
          id="saveBtn"
          onclick="saveEstimation()"
          class="hidden flex-1 bg-green-600 text-white py-3 px-6 rounded-xl font-medium"
        >
          حفظ التخمين
        </button>
      </div>
    </div>

    <script>
      let currentStep = 1;
      let selectedPropertyType = "";
      let selectedCondition = "";

      function goBack() {
        alert("العودة للشاشة الرئيسية");
      }

      function selectPropertyType(type) {
        selectedPropertyType = type;
        // Remove selection from all cards
        document.querySelectorAll(".property-card").forEach((card) => {
          card.classList.remove("selected");
        });
        // Add selection to clicked card
        event.currentTarget.classList.add("selected");
      }

      function selectCondition(element, condition) {
        selectedCondition = condition;
        // Remove selection from all condition buttons
        document.querySelectorAll(".condition-btn").forEach((btn) => {
          btn.classList.remove("border-blue-500", "bg-blue-50");
          btn.classList.add("border-gray-200");
        });
        // Add selection to clicked button
        element.classList.remove("border-gray-200");
        element.classList.add("border-blue-500", "bg-blue-50");
      }

      function updateAreaValue(value) {
        document.getElementById("areaValue").textContent = value + " متر مربع";
      }

      function nextStep() {
        if (currentStep === 1) {
          if (!selectedPropertyType) {
            alert("يرجى اختيار نوع العقار أولاً");
            return;
          }
          showStep(2);
        } else if (currentStep === 2) {
          // Simulate AI processing
          showProcessing();
          setTimeout(() => {
            showStep(3);
          }, 2000);
        }
      }

      function previousStep() {
        if (currentStep > 1) {
          showStep(currentStep - 1);
        }
      }

      function showStep(step) {
        // Hide all steps
        document.getElementById("propertyTypeStep").classList.add("hidden");
        document.getElementById("propertyDetailsStep").classList.add("hidden");
        document.getElementById("resultsStep").classList.add("hidden");

        // Update step indicators
        for (let i = 1; i <= 3; i++) {
          const stepEl = document.getElementById(`step${i}`);
          if (i < step) {
            stepEl.className =
              "step-completed w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-bold";
          } else if (i === step) {
            stepEl.className =
              "step-active w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-bold";
          } else {
            stepEl.className =
              "step-inactive w-8 h-8 rounded-full flex items-center justify-center text-gray-600 text-sm font-bold";
          }
        }

        // Show current step
        if (step === 1) {
          document
            .getElementById("propertyTypeStep")
            .classList.remove("hidden");
          document.getElementById("backBtn").classList.add("hidden");
          document.getElementById("nextBtn").classList.remove("hidden");
          document.getElementById("saveBtn").classList.add("hidden");
        } else if (step === 2) {
          document
            .getElementById("propertyDetailsStep")
            .classList.remove("hidden");
          document.getElementById("backBtn").classList.remove("hidden");
          document.getElementById("nextBtn").classList.remove("hidden");
          document.getElementById("saveBtn").classList.add("hidden");
          document.getElementById("nextBtn").textContent = "احسب التخمين";
        } else if (step === 3) {
          document.getElementById("resultsStep").classList.remove("hidden");
          document.getElementById("backBtn").classList.remove("hidden");
          document.getElementById("nextBtn").classList.add("hidden");
          document.getElementById("saveBtn").classList.remove("hidden");
        }

        currentStep = step;
      }

      function showProcessing() {
        const nextBtn = document.getElementById("nextBtn");
        nextBtn.innerHTML =
          '<svg class="animate-spin w-5 h-5 mx-auto" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>';
        nextBtn.disabled = true;
      }

      function saveEstimation() {
        alert('تم حفظ التخمين بنجاح! يمكنك العثور عليه في قسم "تخميناتي"');
      }
    </script>
    <script>
      (function () {
        function c() {
          var b = a.contentDocument || a.contentWindow.document;
          if (b) {
            var d = b.createElement("script");
            d.innerHTML =
              "window.__CF$cv$params={r:'974a925ee5d85dab',t:'MTc1NjExOTQ4MC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";
            b.getElementsByTagName("head")[0].appendChild(d);
          }
        }
        if (document.body) {
          var a = document.createElement("iframe");
          a.height = 1;
          a.width = 1;
          a.style.position = "absolute";
          a.style.top = 0;
          a.style.left = 0;
          a.style.border = "none";
          a.style.visibility = "hidden";
          document.body.appendChild(a);
          if ("loading" !== document.readyState) c();
          else if (window.addEventListener)
            document.addEventListener("DOMContentLoaded", c);
          else {
            var e = document.onreadystatechange || function () {};
            document.onreadystatechange = function (b) {
              e(b);
              "loading" !== document.readyState &&
                ((document.onreadystatechange = e), c());
            };
          }
        }
      })();
    </script>
  </body>
</html>
